import AppHelper from 'helpers/AppHelper'
import AuthHelper from 'helpers/AuthHelper'
import ServiceHelper from 'helpers/ServiceHelper'
import CustomerHelper from 'helpers/CustomerHelper'
import InterventionHelper from 'helpers/InterventionHelper'
import AuxiliaryHelper from 'helpers/AuxiliaryHelper'

import AccountType from 'utils/constants/AccountType'

import ServiceUtils from 'utils-lib/entities/ServiceUtils'

import { BaseData, Utils, TextUtils } from 'ap-react-bootstrap'

/* This class was auto-generated by the JavaScriptWriter */
class ServiceHomeData extends BaseData {

	register(obj) {
		super.register(obj)
		
		this.obj.state = {}

		let service = ServiceHelper.getData(AuthHelper.getEntityId())
		
		this.premium = (service.accountType || '') === AccountType.PREMIUM.key
		this.complete = ServiceUtils.checkProfileCompleted(service)

		this.customersCount = Utils.map(CustomerHelper.getData()).length
		this.textCustomer = ' ' + TextUtils.pluralize('usager', this.customersCount ) + '.'

		this.interventionsCount = Utils.map(InterventionHelper.getData()).length
		this.textIntervention = ' ' + TextUtils.pluralize('intervention', this.interventionsCount) + ' en cours.'

		this.auxiliariesCount = Utils.map(CustomerHelper.getData()).length
		this.textauxiliaries = ' ' + TextUtils.pluralize('auxiliaire', this.customersCount ) + '.'

	}

	unregister() {
	}

}
var ServiceHomeObj = new ServiceHomeData()
export default ServiceHomeObj
